{"version":3,"sources":["../src/preview.ts","../src/constants.ts","../src/download-file.ts"],"names":["useChannel","ADDON_ID","DOWNLOAD_EVENT","saveAs","downloadFile","file","json","blob","download_file_default","downloadPage","title","page","decorator","getStory","preview","preview_default"],"mappings":"AAAA,OAAS,cAAAA,MAAkB,yBCApB,IAAMC,EAAW,SACXC,EAAiB,GAAGD,aCDjC,OAAS,UAAAE,MAAc,aAEvB,IAAMC,EAAe,CAACC,EAAcC,IAAiB,CACnD,IAAMC,EAAO,IAAI,KAAK,CAAC,KAAK,UAAUD,CAAI,CAAC,EAAG,CAC5C,KAAM,0BACR,CAAC,EAEDH,EAAOI,EAAMF,CAAI,CACnB,EAEOG,EAAQJ,EFNf,SAASK,EAAa,CAAE,MAAAC,CAAM,EAAsB,CAClD,QAAQ,IAAI,cAAc,EAE1B,IAAMC,EAAO,OAAe,YAAY,QAAQ,CAC9C,MAAAD,EACA,MAAO,KACP,OAAQ,GACV,CAAC,EAEDC,EAAK,OAAS,CACX,OAAe,YAAY,UAAU,CACpC,UAAW,GACX,oBAAqB,GACrB,cAAe,iBACjB,CAAC,CACH,EAEAH,EAAa,GAAGE,iBAAsBC,CAAI,CAC5C,CAEA,IAAMC,EAAaC,IACjBb,EAAW,CACT,CAACE,CAAc,EAAGO,CACpB,CAAC,EAEMI,EAAS,GAGZC,EAAU,CACd,WAAY,CAACF,CAAS,CACxB,EAEOG,EAAQD","sourcesContent":["import { useChannel } from '@storybook/preview-api';\nimport { DOWNLOAD_EVENT } from './constants';\nimport downloadFile from './download-file';\n\nfunction downloadPage({ title }: { title: string }) {\n  console.log('downloadPage')\n\n  const page =(window as any).page2layers.getPage({\n    title,\n    width: 1920,\n    height: 5000\n  });\n\n  page.layers = [\n    (window as any).page2layers.getSymbol({\n      fixPseudo: true,\n      removePreviewMargin: true,\n      querySelector: '#storybook-root'\n    })\n  ];\n\n  downloadFile(`${title}.asketch.json`, page);\n}\n\nconst decorator = (getStory: any) => {\n  useChannel({\n    [DOWNLOAD_EVENT]: downloadPage\n  })\n \n  return getStory();\n};\n\nconst preview = {\n  decorators: [decorator]\n};\n\nexport default preview;\n","export const ADDON_ID = \"sketch\";\nexport const DOWNLOAD_EVENT = `${ADDON_ID}:download`;\nexport const NAME = \"Sketch Export\";","import { saveAs } from 'file-saver';\n\nconst downloadFile = (file: string, json: object) => {\n  const blob = new Blob([JSON.stringify(json)], {\n    type: 'text/plain;charset=utf-8'\n  });\n\n  saveAs(blob, file);\n};\n\nexport default downloadFile;\n"]}